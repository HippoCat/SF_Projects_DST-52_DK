# SF_Projects_DST-52_DK/module_03_TripAdvisor_Restaurants

В этом репозитории хранится решениe "Проект 3. О вкусной и здоровой пище".

Задача создать свой первый кейс по машинному обучению: самостоятельно очистить довольно сильно загрязнённый датасет, извлечь из него несколько новых признаков и подготовитьи данные для обучения модели.

Также  принять участие в первом соревновании по машинному обучению и вступить в самое большое в мире сообщество действующих Data Scientist'ов. 


Дмитрий Кузнецов, поток DST-52 (SkillFactory), 21-26 Мая 2021



## Рекомендованная последовательность действий от организаторов


- разобраться с подробным описанием того, как будет организовано изучение модуля;
- зарегистрироваться в соревновании на kaggle;
- проанализировать baseline к соревнованию;
- следуя подсказкам в модуле, обработать оставшиеся признаки и подготовить собственное решение;
- победить в соревновании :)

_"Не пугайтесь, вам не придётся совершать академический подвиг и изучать машинное обучение в экстремально короткие сроки! На самом деле код для создания и обучения модели мы вам предоставим в готовом виде, и этот код будет довольно простым: в нём не будет предусмотрен подбор параметров и тонкая настройка модели (всему этому вы научитесь позже, в курсе по ML). Пока ваша задача будет состоять в том, чтобы качественно подготовить данные для обучения модели. Скоро вы убедитесь, что тщательная очистка данных и генерация новых признаков (Feature Engineering) способны повысить точность модели в два и более раз, и владение этими навыками играют в машинном обучении не меньшую роль, чем умение выбрать алгоритм и настроить модель."_


## Что сделал


1. Заполнил пропуски в 'Number of Reviews' медианой по городу. Заполнение медианой дает лучшую MAE, чем заполнение средним значением
2. Заполнил пропуски в 'Price Range' случайными значениями используя np.random.choice([1,2,3], p=[0.24, 0.71, 0.05]), где p - распределение цен в среднем по датасету. Заполнять просто средним или медианой не хотелось, ибо что одно, что другое равно 2, то есть соответствует средней ценовой категории.
3. Преобразовал 'Cuisine Style' в список и на его основе создал столбец 'Number of Cuisines' - просто по длине списка.
4. Если список 'Cuisine Style' пустой, то пробовал заполнять его либо средним, либо медианным значением количество кухонь в городе. Однако в обоих случаях MAE ухудшалось.
5. Поэтому в результате просто заполнил пропуски (т.е. в случае пустых списков) единицей - 1.
6. В __идеале__ надо уметь парсить сайт в поисках доп инфы в случае пропусков. Так например, можно используя URL из датасета вытащить с сайта недостающую инфу о 'Number of Reviews', 'Price Range', 'Cuisine Style' и пр.
7. В связи с отсутствием навыка и недостатком времени не стал делать п.6
8. Добавил инфу из внешних источников: из Wikipedia о населении городов, и из TripAdvisor о количестве ресторанов в городе. Создал соответствующие колонки в датасете.




### 2. Числовые столбцы - обзор корреляционой матрицы

Сразу исключил из рассмотрения как малозначащие следующие числовые столбцы: __traveltime__, __famrel__ и __freetime__.

- заметная положительная корреляция между уровнем образования матери и отца __medu/fedu__. Для модели имеет смысл вывести одну величину - уровень образования в семье;
- положительная корреляция влияния уровня образования каждого из родителей позволяет предположить, что и общий уровень образования родителей будет положительно коррелировать с успеваемостью 'score';
- __age__ молодые успевают лучше, чем возрастные;
- также видна отрицателная корреляция между __studytime__ и __studytime, granular__, что позволяет предложить исключить одну из переменных при пострении модели;
- также видно положительное влияние параметра __studytime__ на успехи в учебе;
- параметры __failures__ и __goout__ снижают успеваемость. 

### 3. Общие выводы

Итак, в результате EDA для анализа влияния  условий жизни учащихся в возрасте от 15 до 22 лет на оценку по математике были получены следующие выводы:

- В данных достаточно мало пустых значений, как правило не более 10%. Пропуски были заполны случайным образом;
- Выбросы найдены в единичных количествах и были либо удалены (не более 5% данных), либо исправлены на значения согласно здравому смыслу;
- Отрицательная корреляция параметра __studytime__ и __studytime, granular__ может говорить о том, эти два параметра обратно пропорциональны друг другу; 
- Наиболее важные категориальные параметры, которые предлагается использовать в дальнейшем для построения модели:
    - __school__
    - __sex__
    - __mjob/fjob__ 
    - __reason__
    - __schoolsup__
    - __higher__
- Наиболее важные числовые столбцы, которые предлагается использовать в дальнейшем для построения модели:
    - __medu/fedu__
    - __age__
    - __studytime__
    - __failures__
    - __goout__

### 4. Комментарии на будущее

Что можно улучшать:

1. Качество написания функций - более аккуратно и универсально обрабатывать колонки разных типов;
2. Автоматизировать процесс обработки колонок используя функцию из п. 1;
3. Провести тест Стьюдента, который в данной работе практически не реализован по причине цейтнота;
4. Отводить на проект более 3-х дней, желательно не менее недели;
5. Продумать функцию, которая будет заменять пропуски не просто рандомно, а пропорционально имеющимся значениям. Таким образом будет вноситься меньше искажений в распределение.






Буду рад любой обратной связи, замечаниям и конструктивной критике об этом проекте, как от команды курса SkillFactory, так и от коллег однокурсников.

Заранее благодарен.

Д.К.
26 Мая 2021, 18:00